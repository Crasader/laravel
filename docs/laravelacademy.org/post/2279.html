<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
            基于Laravel开发博客应用系列 —— 构建博客后台管理系统 - Laravel学院
    </title>
    <meta name="keywords" content="Laravel学院,Laravel,Lumen,PHP,PHP框架,文档,教程,中文,资源,学习">
    <meta name="description" content="Laravel学院致力于提供优质Laravel中文学习资源">
        <!-- CSRF Token -->
<meta name="csrf-token" content="4p2LF3GX9JkAp8kLsq108iKyPudj68JXF2ozx5Oh">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="shortcut icon" href="https://static.laravelacademy.org/image/favicon.png" title="Favicon">
<link rel='stylesheet' id='font-awesome-css'  href='https://static.laravelacademy.org/css/font-awesome.css' type='text/css' media='screen' />
<link rel='stylesheet' id='ipt_kb-style-css'  href='https://static.laravelacademy.org/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='ipt_kb-bootstrap-css'  href='https://static.laravelacademy.org/css/bootstrap.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='ipt_kb-bootstrap-theme-css'  href='https://static.laravelacademy.org/css/bootstrap-theme.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='ipt_kb-icomoon-css'  href='https://static.laravelacademy.org/css/icomoon.css' type='text/css' media='all' />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" type="text/css" media="all"/>
<link rel='stylesheet' id='ipt_kb-fix-css'  href='https://static.laravelacademy.org/css/academy.css' type='text/css' media='all' />
<style>
    .scroll-back-to-top-wrapper {
        position: fixed;
        opacity: 0;
        visibility: hidden;
        overflow: hidden;
        text-align: center;
        z-index: 99999999;
        background-color: #e74430;
        color: #eeeeee;
        width: 50px;
        height: 48px;
        line-height: 48px;
        right: 30px;
        bottom: 30px;
        padding-top: 2px;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        -webkit-transition: all 0.5s ease-in-out;
        -moz-transition: all 0.5s ease-in-out;
        -ms-transition: all 0.5s ease-in-out;
        -o-transition: all 0.5s ease-in-out;
        transition: all 0.5s ease-in-out;
    }
    .scroll-back-to-top-wrapper:hover {
        background-color: #f4645f;
        color: #eeeeee;
    }
    .scroll-back-to-top-wrapper.show {
        visibility:visible;
        cursor:pointer;
        opacity: 1.0;
    }
    .scroll-back-to-top-wrapper i.fa {
        line-height: inherit;
    }
    .scroll-back-to-top-wrapper .fa-lg {
        vertical-align: 0;
    }
    .media-left, .media>.pull-left {
        padding-right: 10px;
    }
    .media-body, .media-left, .media-right {
        display: table-cell;
        vertical-align: top;
    }
    .media-body p {
        color: #aaa;
        margin: 0 0 5px;
    }
</style></head>

<body class="post-template-default single single-post single-format-standard group-blog">
<div id="page" class="hfeed site">
    <header id="masthead" class="site-header" role="banner">
            <nav class="navbar navbar-default navbar-static-top main-navigation" role="navigation" id="site_navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="site-anchor" href="../index.html">
                <img src="https://static.laravelacademy.org/wp-content/uploads/2017/09/logo.png" width="200" height="50" alt="">
            </a>

        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                <li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-7 dropdown">
                    <a title="文档" href="2279.html#" data-toggle="dropdown" class="dropdown-toggle">文档 <span class="caret"></span></a>
                    <ul role="menu" class=" dropdown-menu">
                        <li id="menu-item-8567" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8567"><a title="Laravel 5.7" href="../laravel-docs-5_7">Laravel 5.7</a></li>
                        <li id="menu-item-8565" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8565"><a title="Laravel 5.6" href="../laravel-docs-5_6">Laravel 5.6</a></li>
                        <li id="menu-item-7585" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7585"><a title="Laravel 5.5" href="../laravel-docs-5_5">Laravel 5.5</a></li>
                        <li id="menu-item-6676" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6676"><a title="Laravel 5.4" href="../laravel-docs-5_4">Laravel 5.4</a></li>
                        <li id="menu-item-5711" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5711"><a title="Laravel 5.3" href="../laravel-docs-5_3">Laravel 5.3</a></li>
                        <li id="menu-item-2931" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2931"><a title="Laravel 5.2" href="../laravel-docs-5_2">Laravel 5.2</a></li>
                        <li id="menu-item-285" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-285"><a title="Laravel 5.1" href="../laravel-docs-5_1">Laravel 5.1</a></li>
                        <li id="menu-item-508" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-508"><a title="Lumen" href="../lumen-docs">Lumen</a></li>
                    </ul>
                </li>
                <li id="menu-item-3168" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3168 dropdown">
                    <a title="教程" href="2279.html#" data-toggle="dropdown" class="dropdown-toggle">教程 <span class="caret"></span></a>
                    <ul role="menu" class=" dropdown-menu">
                        <li id="menu-item-948" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-948"><a title="Laravel从入门到精通系列教程" href="../laravel-tutorial-5_7">Laravel从入门到精通</a></li>
                        <li id="menu-item-2122" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2122"><a title="博客应用系列教程" href="../tutorials/blog">博客应用</a></li>
                        <li id="menu-item-8566" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-8566"><a title="API应用系列教程" href="../api-driven-development-laravel-vue">API 应用</a></li>
                        <li id="menu-item-3513" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3513"><a title="Laravel新特性系列" href="../tutorials/feature">Laravel新特性</a></li>
                        <li id="menu-item-5612" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5612"><a title="VueJS教程" href="../tutorials/vuejs">VueJS教程</a></li>
                        <li id="menu-item-xmq" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-xmq"><a title="数据结构与算法(PHP语言描述)" href="https://t.zsxq.com/yz7iMni" target="_blank">数据结构与算法</a></li>
                    </ul>
                </li>
                <li id="menu-item-671" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-671 dropdown">
                    <a title="项目" href="2279.html#" data-toggle="dropdown" class="dropdown-toggle">项目 <span class="caret"></span></a>
                    <ul role="menu" class=" dropdown-menu">
                        <li id="menu-item-2044" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2044"><a title="网站" href="../project/website">网站</a></li>
                        <li id="menu-item-1327" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1327"><a title="扩展包" href="../tutorials/packages">扩展包</a></li>
                    </ul>
                </li>
                <li id="menu-item-159" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-159 dropdown">
                    <a title="资源" href="2279.html#" data-toggle="dropdown" class="dropdown-toggle">资源 <span class="caret"></span></a>
                    <ul role="menu" class=" dropdown-menu">
                        <li id="menu-item-2482" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2482"><a title="设计模式" href="../resources/design-patterns">设计模式</a></li>
                        <li id="menu-item-644" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-644"><a title="代码片段" href="../resources/code">代码片段</a></li>
                        <li id="menu-item-9343" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9343"><a title="基础技术" href="../resources/underlying">基础技术</a></li>
                        <li id="menu-item-3187" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3187"><a title="运维部署" href="../resources/linux">运维部署</a></li>
                        <li id="menu-item-1265" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1265"><a title="区块链" href="../resources/blockchain">区块链</a></li>
                        <li id="menu-item-680" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-680"><a title="工具系列" href="../resources/tools">工具系列</a></li>
                        <li id="menu-item-5343" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5343"><a title="读书笔记" href="../resources/notebook">读书笔记</a></li>
                        <li id="menu-item-410" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-410"><a title="相关下载" href="../resources-download">相关下载</a></li>
                    </ul>
                </li>
                <li id="menu-item-4225" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-4225 dropdown">
                    <a title="现代PHP" href="2279.html#" data-toggle="dropdown" class="dropdown-toggle">现代PHP <span class="caret"></span></a>
                    <ul role="menu" class=" dropdown-menu">
                        <li id="menu-item-4226" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4226"><a title="新特性" href="../modern-php/feature-modern-php">新特性</a></li>
                        <li id="menu-item-4513" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4513"><a title="最佳实践" href="../modern-php/best-practice">最佳实践</a></li>
                        <li id="menu-item-7512" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7512"><a title="部署调优" href="../modern-php/devops">部署调优</a></li>
                        <li id="menu-item-4496" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4496"><a title="编码规范" href="https://github.com/PizzaLiu/PHP-FIG">编码规范</a></li>
                        <li id="menu-item-7178" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7178"><a title="扩展开发" href="../modern-php/php-extension">扩展开发</a></li>
                        <li id="menu-item-2397" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2397"><a title="PHP 7" href="../modern-php/php7">PHP 7</a></li>
                    </ul>
                </li>
                <li id="menu-item-3999" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3999"><a title="问答" href="../discussions">问答</a></li>
                <li id="menu-item-6268" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6268"><a title="招聘" href="../jobs">招聘</a></li>
                <li id="menu-item-7938" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7938"><a title="新闻" href="../news">新闻</a></li>
                <li id="menu-item-7938" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7938"><a title="捐赠" href="../donate-us">捐赠</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                                    <li><a href="../login">登录</a></li>
                    <li><a href="../register">注册</a></li>
                            </ul>
        </div>
    </div>
</nav>    </header><!-- #masthead -->

    <div id="content" class="site-content container">

            <ol id="breadcrumbs" class="breadcrumb" xmlns:v="http://rdf.data-vocabulary.org/#">
    <li typeof="v:Breadcrumb">
        <a rel="v:url" property="v:title" href="../index.html">首页</a>
    </li>

                    <li typeof="v:Breadcrumb">
            <a rel="v:url" property="v:title" href="../tutorials.1">
                教程
            </a>
        </li>
                            <li typeof="v:Breadcrumb">
            <a rel="v:url" property="v:title" href="../blog">
                博客系列
            </a>
        </li>
                            <li typeof="v:Breadcrumb" class="active">
            <span property="v:title">基于Laravel开发博客应用系列 —— 构建博客后台管理系统</span>
        </li>
            </ol>
        <div id="primary" class="content-area col-md-8">
            <main id="main" class="site-main" role="main">

                <article class="post type-post status-publish format-standard has-post-thumbnail hentry category-basic">
                        <header class="entry-header page-header">
        <h1 class="entry-title">基于Laravel开发博客应用系列 —— 构建博客后台管理系统</h1>

        <div class="entry-meta text-muted">
                        <span class="posted-on">
                <i class="glyphicon glyphicon-calendar"></i>
                发布于
                <a href="2279.html" rel="bookmark">
                    <time class="entry-date published" datetime="2015-11-30T21:50:37+08:00">2015-11-30</time>
                    <time class="updated" datetime="2015-11-30T21:50:37+08:00">2015-11-30 21:50:37</time>
                </a>
            </span>
                        <span class="byline">
                <span class="author vcard">
                    <i class="glyphicon glyphicon-user"></i>
                    <a class="url fn n" href="../author/nonfu">学院君</a>
                </span>
            </span>
            <span class="article-views">
                <i class="glyphicon ipt-icon-eye"></i>
                28896 Views
            </span>
                                </div><!-- .entry-meta -->
    </header><!-- .entry-header -->
                        <div class="entry-content">
        <p>一个完整的博客应用不能没有后台管理系统。所以在本节中我们将继续完善博客应用 —— 开发后台管理系统。</p>
<h3 id="toc_0"><strong>1、创建路由</strong></h3>
<p>在上一节十分钟创建博客项目中，已经设置过了 <code>app/Http/routes.php</code>，现在，我们要添加后台路由到该文件。</p>
<p>为什么要使用路由？</p>
<p>Laravel 5.1 一种机制用来建立 web 请求与处理 web 请求的代码之间的关系，这种机制被称作路由。本项目中所有路由都定义在 <code>app/Http/routes.php</code> 文件中。</p>
<p>只要 web 请求路径在 <code>public</code> 目录下找不到，Laravel 5.1 就会从路由文件查找对应关系并返回响应。</p>
<p>修改 <code>app/Http/routes.php</code> 内容如下：</p>
<pre>&lt;?php

// Blog pages
get('/', function () {
    return redirect('/blog');
});
get('blog', 'BlogController@index');
get('blog/{slug}', 'BlogController@showPost');

// Admin area
get('admin', function () {
    return redirect('/admin/post');
});
$router-&gt;group(['namespace' =&gt; 'Admin', 'middleware' =&gt; 'auth'], function () {
    resource('admin/post', 'PostController');
    resource('admin/tag', 'TagController');
    get('admin/upload', 'UploadController@index');
});

// Logging in and out
get('/auth/login', 'Auth\AuthController@getLogin');
post('/auth/login', 'Auth\AuthController@postLogin');
get('/auth/logout', 'Auth\AuthController@getLogout');
</pre>
<p>保存好 routes.php 后，下一步我们要创建对应的控制器。</p>
<h3 id="toc_1"><strong>2、创建后台控制器</strong></h3>
<p>使用 Artisan 命令生成控制器：</p>
<pre>php artisan make:controller Admin\\PostController 
php artisan make:controller Admin\\TagController 
php artisan make:controller Admin\\UploadController --plain</pre>
<p>上述三个命令运行完成后，会在 <code>app/Http/Controllers/Admin</code> 目录下生成三个控制器。</p>
<p>修改 <code>PostController</code> 类的 <code>index()</code> 方法如下：</p>
<pre> /**
  * Display a listing of the posts.
  *
  * @return Response
  */
public function index()
{
    return view('admin.post.index');
}</pre>
<p>现在 <code>index()</code> 方法只是简单渲染视图，稍后我们会完善它。</p>
<h3 id="toc_2"><strong>3、创建视图</strong></h3>
<p>我们还需要创建一些视图，一步步来好了。</p>
<h4 id="toc_3"><strong>创建后台布局</strong></h4>
<p>Blade 模板引擎是 Laravel 提供的最强大的功能之一，接下来我们将基于 Blade 创建一个供后台使用的布局文件，从而让后台有一个整体外观一致的视觉体验。</p>
<p>在 <code>resources/views</code> 目录下新建一个 <code>admin</code> 目录，然后在该目录下创建一个 <code>layout.blade.php</code> 文件并编辑其内容如下：</p>
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

        &lt;title&gt;{{ config('blog.title') }} Admin&lt;/title&gt;

        &lt;link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet"&gt;
        @yield('styles')

        &lt;!--[if lt IE 9]&gt;
            &lt;script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"&gt;&lt;/script&gt;
            &lt;script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt;
        &lt;![endif]--&gt;
    &lt;/head&gt;
    &lt;body&gt;

        {{-- Navigation Bar --}}
        &lt;nav class="navbar navbar-default"&gt;
            &lt;div class="container-fluid"&gt;
                &lt;div class="navbar-header"&gt;
                    &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-menu"&gt;
                        &lt;span class="sr-only"&gt;Toggle Navigation&lt;/span&gt;
                        &lt;span class="icon-bar"&gt;&lt;/span&gt;
                        &lt;span class="icon-bar"&gt;&lt;/span&gt;
                        &lt;span class="icon-bar"&gt;&lt;/span&gt;
                    &lt;/button&gt;
                    &lt;a class="navbar-brand" href="#"&gt;{{ config('blog.title') }} Admin&lt;/a&gt;
                &lt;/div&gt;
                &lt;div class="collapse navbar-collapse" id="navbar-menu"&gt;
                    @include('admin.partials.navbar')
                &lt;/div&gt;
           &lt;/div&gt;
        &lt;/nav&gt;

        @yield('content')

        &lt;script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"&gt;&lt;/script&gt;
        &lt;script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"&gt;&lt;/script&gt;

        @yield('scripts')

    &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>上面的代码片段可能看上去很熟悉，没错，这就是 Bootstrap 的基本模板，我们只是在其基础上加了一些额外的钩子：</p>
<ul>
<li><code>&lt;title&gt;{{ config('blog.title') }} Admin&lt;/title&gt;</code> ： 设置站点标题</li>
<li><code>@yield('styles')</code>：该 Blade 指令将会输出继承自该布局的子视图的 <code>styles</code> 区块内容（如果有的话），其目的在于将 CSS 样式文件放到模板顶部。</li>
<li><code>@include('admin.partials.navbar')</code>：这里我们引入另一个 Blade 模板（现在还不存在）</li>
<li><code>@yield('content')</code>：输出页面的主体内容</li>
<li><code>@yield('scripts')</code>：输出额外的 <code>JavaScript</code> 脚本文件</li>
</ul>
<h4 id="toc_4"><strong>创建导航条局部视图</strong></h4>
<p>在 <code>resources/views/admin</code> 目录下新建 <code>partials</code> 目录，并在该目录下创建 <code>navbar.blade.php</code> 文件，编辑其内容如下：</p>
<pre>&lt;ul class="nav navbar-nav"&gt;
    &lt;li&gt;&lt;a href="/"&gt;Blog Home&lt;/a&gt;&lt;/li&gt;
    @if (Auth::check())
        &lt;li @if (Request::is('admin/post*')) class="active" @endif&gt;
            &lt;a href="/admin/post"&gt;Posts&lt;/a&gt;
        &lt;/li&gt;
        &lt;li @if (Request::is('admin/tag*')) class="active" @endif&gt;
            &lt;a href="/admin/tag"&gt;Tags&lt;/a&gt;
        &lt;/li&gt;
        &lt;li @if (Request::is('admin/upload*')) class="active" @endif&gt;
            &lt;a href="/admin/upload"&gt;Uploads&lt;/a&gt;
        &lt;/li&gt;
    @endif
&lt;/ul&gt;

&lt;ul class="nav navbar-nav navbar-right"&gt;
    @if (Auth::guest())
        &lt;li&gt;&lt;a href="/auth/login"&gt;Login&lt;/a&gt;&lt;/li&gt;
    @else
        &lt;li class="dropdown"&gt;
            &lt;a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" 
                    aria-expanded="false"&gt;
                {{ Auth::user()-&gt;name }}
                &lt;span class="caret"&gt;&lt;/span&gt;
            &lt;/a&gt;
            &lt;ul class="dropdown-menu" role="menu"&gt;
                &lt;li&gt;&lt;a href="/auth/logout"&gt;Logout&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
    @endif
&lt;/ul&gt;
</pre>
<p>如果用户登录进来，该模板会显示一个顶部导航条：左侧包含 Posts、Tags 和 Uploads，右侧包含 Logout。</p>
<p>如果用户没有登录，只在导航条右侧显示 Login 链接。</p>
<h4 id="toc_5"><strong>创建登录表单</strong></h4>
<p>现在我们已经有了后台布局视图，创建登录表单不要太简单，首先在 <code>resources/views</code> 目录下新建 <code>auth</code> 目录，并在该目录下创建  <code>login.blade.php</code> 文件，编辑该文件内容如下：</p>
<pre>@extends('admin.layout')

@section('content')
&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-8 col-md-offset-2"&gt;
            &lt;div class="panel panel-default"&gt;
                &lt;div class="panel-heading"&gt;Login&lt;/div&gt;
                &lt;div class="panel-body"&gt;

                    @include('admin.partials.errors')

                    &lt;form class="form-horizontal" role="form" method="POST" 
                            action="{{ url('/auth/login') }}"&gt;
                        &lt;input type="hidden" name="_token" value="{{ csrf_token() }}"&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label class="col-md-4 control-label"&gt;E-Mail Address&lt;/label&gt;
                            &lt;div class="col-md-6"&gt;
                            &lt;input type="email" class="form-control" name="email" value="{{ old('email') }}" autofocus&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label class="col-md-4 control-label"&gt;Password&lt;/label&gt;
                            &lt;div class="col-md-6"&gt;
                            &lt;input type="password" class="form-control" name="password"&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;div class="col-md-6 col-md-offset-4"&gt;
                                &lt;div class="checkbox"&gt;
                                    &lt;label&gt;
                                    &lt;input type="checkbox" name="remember"&gt; Remember Me
                                    &lt;/label&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;div class="col-md-6 col-md-offset-4"&gt;
                            &lt;button type="submit" class="btn btn-primary"&gt;Login&lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
@endsection
</pre>
<p>在登录表单中我们引入了一个尚未创建的 <code>admin.partials.errors</code>，接下来就来创建该视图：</p>
<h4 id="toc_6"><strong>创建错误局部视图</strong></h4>
<p>验证表单输入错误并在视图中显示这些错误在处理表单时是一个通用任务，所以我们将其放到一个单独的 Blade 模板视图中进行处理。</p>
<p>在 <code>resources/views/admin/partials</code> 目录下创建 <code>errors.blade.php</code>，编辑其内容如下：</p>
<pre>@if (count($errors) &gt; 0)
    &lt;div class="alert alert-danger"&gt;
        &lt;strong&gt;Whoops!&lt;/strong&gt;
        There were some problems with your input.&lt;br&gt;&lt;br&gt;
        &lt;ul&gt;
        @foreach ($errors-&gt;all() as $error)
            &lt;li&gt;{{ $error }}&lt;/li&gt;
        @endforeach
        &lt;/ul&gt;
    &lt;/div&gt;
@endif</pre>
<p><code>$errors</code> 变量在每个视图中都有效，其中包含了一个错误集合（如果有错误的话），我们只需要检查是否包含错误并将错误显示出来即可。</p>
<h4 id="toc_7"><strong>创建文章列表视图</strong></h4>
<p>在 <code>resources/views/admin</code> 目录下创建一个新的目录 <code>post</code>，并在该目录下新建 <code>index.blade.php</code>，编辑该文件内容如下：</p>
<pre>@extends('admin.layout')

@section('content')
    &lt;div class="container-fluid"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-md-8 col-md-offset-2"&gt;
                &lt;div class="panel panel-default"&gt;
                    &lt;div class="panel-heading"&gt;
                        &lt;h3 class="panel-title"&gt;Posts&lt;/h3&gt;
                    &lt;/div&gt;
                    &lt;div class="panel-body"&gt;

                        TODO

                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
@stop
</pre>
<p>这只是一个临时视图，后面我们会逐步完善它。</p>
<h3 id="toc_8"><strong>4、测试登录/退出</strong></h3>
<p>在浏览器中访问 <code>http://blog.app/admin</code>，回跳转到登录页面，页面显示如下：</p>
<p><img class="alignnone size-full wp-image-2281" src="https://static.laravelacademy.org/wp-content/uploads/2015/11/2015-11-30-21-15-18.png" alt="Laravel博客后台登录页面" width="914" height="279" /></p>
<p>你可以试着登录，当然你不可能登录成功，因为我们还没有创建后台用户。</p>
<h4 id="toc_9"><strong>创建后台用户</strong></h4>
<p><code>artisan tinker</code> 可以用于通过命令行与应用进行交互，下面我们在 Homestead 虚拟机中项目根目录下使用该命令为博客项目创建后台用户：</p>
<p><img class="alignnone size-full wp-image-2282" src="https://static.laravelacademy.org/wp-content/uploads/2015/11/2015-11-30-21-20-25.png" alt="使用 artisan tinker 为 Laravel 博客创建后台用户" width="716" height="253" /></p>
<p>现在我们就可以使用刚刚创建的用户登录后台了。回到登录页试试吧。</p>
<p>登录成功后页面跳转到文章列表页：</p>
<p><img class="alignnone size-full wp-image-2283" src="https://static.laravelacademy.org/wp-content/uploads/2015/11/2015-11-30-21-23-00.png" alt="Laravel 博客后台文章列表页" width="807" height="175" /></p>
<h4 id="toc_10"><strong>修改退出后跳转 URL</strong></h4>
<p>如果点击页面顶部导航条右侧的下拉列表并选择 Logout 退出，你会发现页面没有跳转到登录页面，而是博客页面。</p>
<p>为什么会这样？</p>
<p>如果查看 <code>AuthController</code> 类（<code>app/Http/Controllers/Auth/AuthController</code>）的 <code>getLogout()</code> 方法，你会发现并没有该方法，在其父类中也没有 <code>getLogout()</code> 方法，这是因为 <code>AuthController</code> 使用了 <code>AuthenticatesAndRegistersUsers</code> trait 和  <code>AuthenticatesUsers</code> trait，<code>getLogout()</code> 方法正是定义在了 <code>AuthenticateUsers</code> trait 中。</p>
<p>如果你在 <code>vendor/laravel/framework/src</code> 目录下找到 <code>Illuminate/Foundation/Auth</code> 目录，你会发现该目录下有一个 <code>AuthenticatesUsers.php</code>，在该文件中，可以看到 <code>getLogout()</code> 方法，并且该方法在退出完成后重定向到了根路径 <code>/</code> 。</p>
<p>要修改该重定向路径，修改 <code>app/Http/Controllers/Auth/AuthController</code> 代码如下：</p>
<pre>&lt;?php

namespace App\Http\Controllers\Auth;

use App\User;
use Validator;
use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ThrottlesLogins;
use Illuminate\Foundation\Auth\AuthenticatesUsers;

class AuthController extends Controller
{
    use AuthenticatesUsers, ThrottlesLogins;

    protected $redirectAfterLogout = '/auth/login';
    protected $redirectTo = '/admin/post';

    /**
     * Create a new authentication controller instance.
     */
    public function __construct()
    {
        $this-&gt;middleware('guest', ['except' =&gt; 'getLogout']);
    }

    /**
     * Get a validator for an incoming registration request.
     *
     * @param array $data
     * @return \Illuminate\Contracts\Validation\Validator
     */
    protected function validator(array $data)
    {
        return Validator::make($data, [
            'name' =&gt; 'required|max:255',
            'email' =&gt; 'required|email|max:255|unique:users',
            'password' =&gt; 'required|confirmed|min:6',
        ]);
    }
}
</pre>
<p>我们移除了 <code>AuthenticateAndRegistersUsers</code> trait，因为我们的应用不允许普通用户注册。然后我们设置了  <code>$redirectAfterLogout</code> 属性和 <code>$redirectTo</code> 属性，用来指定登录和退出后的重定向 URL。</p>
<p>该类的其余部分和之前一样保持不变。</p>
<h4 id="toc_11"><strong>修改登录后跳转 URL</strong></h4>
<p>默认登录成功后跳转链接是 <code>/home</code>，和退出一样，我们可以修改该URL。</p>
<p>编辑 <code>app/Http/Middleware/RedirectIfAuthenticated.php</code> 文件，修改第38行代码如下：</p>
<pre>return new RedirectResponse('/admin/post');</pre>
<h4 id="toc_12"><strong>登录/退出</strong></h4>
<p>由于现在我们已经将 <code>getLogout()</code> 方法的跳转链接做了修改，现在我们已经可以成功实现登录/退出了。</p>
<p>试试吧。</p>

    </div><!-- .entry-content -->
                        <footer class="entry-meta text-muted well well-sm">
        <div>
            分类：
            <i class="glyphicon glyphicon-folder-open"></i>&nbsp;
            <a href="../tutorials/blog" rel="category tag">
                博客系列
            </a>
        </div>
        <div class="clearfix"></div>
        <div>
            标签：
            <i class="glyphicon glyphicon-tags"></i>&nbsp;
                            <a href="../tags/Laravel" rel="tag">Laravel</a>
                                    ,
                                            <a href="../tags/布局" rel="tag">布局</a>
                                    ,
                                            <a href="https://laravelacademy.org/tags/%E7%99%BB%E5%BD%95" rel="tag">登录</a>
                                    ,
                                            <a href="https://laravelacademy.org/tags/%E9%94%99%E8%AF%AF" rel="tag">错误</a>
                                    ,
                                            <a href="../tags/Bootstrap" rel="tag">Bootstrap</a>
                                    ,
                                            <a href="../tags/博客" rel="tag">博客</a>
                                    ,
                                            <a href="../tags/后台" rel="tag">后台</a>
                                    ,
                                            <a href="../tags/退出" rel="tag">退出</a>
                                    ,
                                            <a href="../tags/导航条" rel="tag">导航条</a>
                                    ,
                                            <a href="../tags/tinker" rel="tag">tinker</a>
                                    </div>
        <div class="clearfix"></div>
        <div class="share-jiathis">
            <span class="share-jiathis-label">分享：</span>
            <div class="social-share"></div>
        </div>
        <div class="clearfix"></div>
        <div>声明： 原创文章，未经允许，禁止转载！</div>
    </footer><!-- .entry-meta -->
                </article><!-- #post-## -->

                    <p class="hidden-xs">
            <span class="ipt_kb_like_article_info pull-right text-info">
                <i class="glyphicon glyphicon-fire"></i>&nbsp;&nbsp;24 人觉得这篇文章很有用
            </span>
        <button type="button" data-loading-text="请稍等" class="btn btn-primary ipt_kb_like_article" data-postid="2279" data-posttype="App\Models\Article">
            <i class="glyphicon glyphicon-thumbs-up"></i> <span class="text">这篇文章对我很有帮助</span>
        </button>
    </p>
    <p class="visible-xs">
        <button type="button" data-loading-text="请稍等" class="btn btn-primary btn-block ipt_kb_like_article" data-postid="2279" data-posttype="App\Models\Article">
            <i class="glyphicon glyphicon-thumbs-up"></i> <span class="text">这篇文章对我很有帮助</span>
        </button>
    </p>
<p class="ipt_kb_like_article_info text-info text-center visible-xs">
    <i class="glyphicon glyphicon-fire"></i>&nbsp;&nbsp;24 觉得这篇文章很有用
</p>
                        <ul role="navigation" id="nav-below" class="post-navigation pager">
        <li class="screen-reader-text">Post navigation</li>
                <li class="nav-previous previous">
            <a href="2265.html" rel="prev">
                <span class="meta-nav"><span class="glyphicon glyphicon-arrow-left"></span></span>
                基于Laravel开发博客应用系列 —— 十分钟搭建博客系统
            </a>
        </li>
                        <li class="nav-next next">
            <a href="2299.html" rel="next">
                基于Laravel开发博客应用系列 —— 使用Bower+Gulp集成前端资源
                <span class="meta-nav"><span class="glyphicon glyphicon-arrow-right"></span></span>
            </a>
        </li>
            </ul><!-- #nav-below -->
    
                    <div class="well author-meta">
        <div class="author-avatar text-center pull-left">
            <a href="../author/nonfu">
                <img alt='学院君' src='https://static.laravelacademy.org/assets/avatars/numxwdxf8lrtrsol.jpg' height='96' width='96' />
            </a>
        </div>
        <h4 class="author-meta-title">
            学院君 has written <a href="../author/nonfu">999</a> articles
        </h4>
        <div class="author-meta-bio">
            <p>Laravel学院院长，终身学习者</p>
            <p>
                <span class="point">积分：117242</span>
                <span class="level">
                等级：P12
                    <label class="label label-default">
                    科学家
                </label>
            </span>
                <span class="level">
                职业：手艺人
            </span>
                <span class="level">
                城市：杭州
            </span>
            </p>
        </div>
        <div class="author-meta-buttons text-right">
            <div class="btn-group">
                <a href="../index.html" class="btn btn-info bstooltip" title="Website"><span class="glyphicon ipt-icon-home"></span></a>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>

                    <!--
<div class="footer-ads" style="margin:10px auto;">
    <a href="http://www.qingdapei.net/laravelacadmy" target="_blank"><img src="http://ads.qingdapei.net/laravelacademy/728-90-1.jpg" width="728"></a>
</div>
-->

                    <div class="google-ads" style="margin-bottom:8px;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Laravel学院详情页底部横幅广告 -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:728px;height:90px"
         data-ad-client="ca-pub-6544917749399342"
         data-ad-slot="4898369711"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

                    <div id="comments" class="comments-area">
    <h4 class="comments-title">
        70 条回复
    </h4>

    <ol class="comment-list">
            <li id="comment-10296" class="comment even thread-even depth-1">
            <article id="div-comment-10296" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='resume tell me about yourself' src='https://www.gravatar.com/avatar/ba1fd99af486bac025144bb3d586f139?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            resume tell me about yourself
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        EssayOneDay provides students with professionally written essays, stoval.32essay.com/how-to-write/my-old-neighborhood-essay.html research papers, tour of duty papers, reviews, theses, dissertations and more. Straight away you run on account of EssayOneDay also in behalf of your almanac chirography needs, you won’t require to crack any other m‚tier rantee first-class coax diajo.32essay.com/small-library/firewall-engineer-resume.html and 100% plagiarism free papers.
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="10296"  aria-label='回复resume tell me about yourself...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2018-07-09T06:37:48+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2018-07-09 06:37:48
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="10296" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-10100" class="comment even thread-even depth-1">
            <article id="div-comment-10100" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='max' src='https://www.gravatar.com/avatar/8083688d277f9dd37ba9d05cee827b96?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            max
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        写了两个 //
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="10100"  aria-label='回复max...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2018-06-06T17:11:52+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2018-06-06 17:11:52
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="10100" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-9132" class="comment even thread-even depth-1">
            <article id="div-comment-9132" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='菜鸟' src='https://www.gravatar.com/avatar/6ca6e48fb2e7c6f45fc2f115aa983129?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            菜鸟
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        是不是少了点什么了?  并没有看到 有生成 AuthController
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="9132"  aria-label='回复菜鸟...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2018-01-30T15:53:56+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2018-01-30 15:53:56
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="9132" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">2</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-8201" class="comment even thread-even depth-1">
            <article id="div-comment-8201" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='pardon110' src='https://www.gravatar.com/avatar/4c4c9a9bbac441c79811eeebb3d068fa?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            pardon110
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        呵呵
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="8201"  aria-label='回复pardon110...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-09-08T13:29:32+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-09-08 13:29:32
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="8201" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-7869" class="comment even thread-even depth-1">
            <article id="div-comment-7869" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='SJJ' src='https://www.gravatar.com/avatar/6d5966fd00aa122e7271d770a0461cc9?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            SJJ
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        看了文章，受益匪浅，多谢大佬。
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="7869"  aria-label='回复SJJ...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-07-20T11:00:03+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-07-20 11:00:03
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="7869" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-7436" class="comment even thread-even depth-1">
            <article id="div-comment-7436" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='native' src='https://www.gravatar.com/avatar/160d64892386a7cfe28d0dfca0fd9f11?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            native
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        浏览器输入http://localhost/admin 直接就调转到 http://localhost/login 去了   。是这里起的作用 'middleware' =&gt; 'auth'   我是laravel 5.3 这个怎么调？
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="7436"  aria-label='回复native...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-05-07T14:46:43+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-05-07 14:46:43
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="7436" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-7131" class="comment even thread-even depth-1">
            <article id="div-comment-7131" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='flyjay' src='https://www.gravatar.com/avatar/9a465934d0b569c0832d4dec636eb591?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            flyjay
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        终于搞明白了。
用中间件进行访问限制时，要给路由命名login和logout。
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="7131"  aria-label='回复flyjay...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-03-26T13:35:41+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-03-26 13:35:41
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="7131" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-7110" class="comment even thread-even depth-1">
            <article id="div-comment-7110" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='flyjay' src='https://www.gravatar.com/avatar/9a465934d0b569c0832d4dec636eb591?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            flyjay
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        我也是用5.4，报一样的错
ErrorException in UrlGenerator.php line 304:
Route [login] not defined. (View: /home/www/htdoc/laravel-test.com/resources/views/auth/login.blade.php)
但我用php artisan make:auth生成了auth的视图了啊
路由也用的最新的默认方法了
Route::get('/auth/login', 'Auth\LoginController@showLoginForm');
Route::post('/auth/login', 'Auth\LoginController@login');
Route::get('/auth/logout', 'Auth\LoginController@logout');

用php artisan route:list检查路由，貌似也正常指定了。
| GET|HEAD  | auth/login             |              | App\Http\Controllers\Auth\LoginController@showLoginForm | web,guest    |
| POST      | auth/login             |              | App\Http\Controllers\Auth\LoginController@login         | web,guest    |
| GET|HEAD  | auth/logout            |              | App\Http\Controllers\Auth\LoginController@logout        | web          |
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="7110"  aria-label='回复flyjay...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-03-23T20:02:59+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-03-23 20:02:59
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="7110" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-6902" class="comment even thread-even depth-1">
            <article id="div-comment-6902" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='yutao' src='https://www.gravatar.com/avatar/d1217e53d8801048a8bc9cb79741dd8e?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            yutao
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        laravel5.4使用auth的时候报错：
InvalidArgumentException in UrlGenerator.php line 304:
Route [login] not defined.
看不懂错误
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="6902"  aria-label='回复yutao...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-03-04T20:31:23+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-03-04 20:31:23
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="6902" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
            <li id="comment-6861" class="comment even thread-even depth-1">
            <article id="div-comment-6861" class="comment-body panel panel-default">
                <div class="panel-heading comment-meta">
                    <div class="comment-author vcard pull-left">
                        <img alt='小狐狸' src='https://www.gravatar.com/avatar/4b0aa1f8623c814bb0eaf20356ff4f0a?s=32&amp;d=retro&amp;r=g' class='avatar avatar-32 photo' height='32' width='32' />
                        <cite class="fn">
                                                            小狐狸
                                                    </cite>
                        <span class="says">says:</span>
                    </div><!-- .comment-author -->
                    <div class="clearfix"></div>
                </div>

                <div class="comment-content panel-body">
                                        好的，我马上试试，刚我直接 把login指定到auth目录下的login视图了，也可以显示出来
                </div>

                <div class="panel-footer">
                    <div class="pull-right">
                        <div class="reply text-right">
                            <a rel='nofollow' class='comment-reply-link btn btn-info btn-sm' href='2279.html#respond' data-id="6861"  aria-label='回复小狐狸...'>
                                <i class="glyphicon ipt-icon-reply"></i>&nbsp;&nbsp;回复
                            </a>
                        </div>
                    </div>
                    <div class="comment-metadata">
                        <time datetime="2017-03-01T11:26:28+08:00">
                            <i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;2017-03-01 11:26:28
                        </time>
                        <span class="vote-link" style="margin-left: 10px;">
                                                            <i class="glyphicon ipt-icon-thumbs-up"></i>
                                <a class="comment-vote-link" href="javascript:void(0);" data-itemid="6861" data-itemtype="App\Models\Comment">
                                    感谢
                                </a>
                                                        (<span class="comment-vote-num">0</span>)
                        </span>
                                            </div><!-- .comment-metadata -->
                    <div class="clearfix"></div>
                </div>
            </article><!-- .comment-body -->
        </li><!-- #comment-## -->
        </ol><!-- .comment-list -->

    <ul class="pagination" role="navigation">
        
                    <li class="page-item disabled" aria-disabled="true" aria-label="&laquo; Previous">
                <span class="page-link" aria-hidden="true">&lsaquo;</span>
            </li>
        
        
                    
            
            
                                                                        <li class="page-item active" aria-current="page"><span class="page-link">1</span></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/2#comments">2</a></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/3#comments">3</a></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/4#comments">4</a></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/5#comments">5</a></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/6#comments">6</a></li>
                                                                                <li class="page-item"><a class="page-link" href="http://laravelacademy.org/post/2279.html/page/7#comments">7</a></li>
                                                        
        
                    <li class="page-item">
                <a class="page-link" href="http://laravelacademy.org/post/2279.html/page/2#comments" rel="next" aria-label="Next &raquo;">&rsaquo;</a>
            </li>
            </ul>


    <div id="respond" class="comment-respond">
        <span class="pull-right">
            <a class="btn btn-danger btn-sm" rel="nofollow" id="cancel-comment-reply-link" href="2279.html#respond" style="display:none;">取消回复</a>
        </span>
                    <p class="logged-in-as alert alert-warning">登录后才能进行评论，<a href="../login">立即登录?</a></p>
                <form action="https://laravelacademy.org/comment/add" method="post" id="comment-form" class="comment-form form-horizontal" novalidate>
            <div class="comment-form-comment form-group">
                <label class="sr-only control-label" for="comment">评论内容</label>
                <textarea placeholder="在这里输入评论内容或者进行提问..." class="form-control" id="comment_content" name="comment_content" rows="6" aria-required="true"></textarea>
            </div>
            <p class="form-submit text-right">
                <label>支持 Markdown 语法，提交之前可通过预览查看效果</label>
                <button name="preview" class="btn btn-success" type="button" id="preview-comment">预览评论</button>
                <button name="submit" class="btn btn-primary" type="button" id="submit-comment">提交评论</button>
                <input type="hidden" name="comment_item_type" value="App\Models\Article" id="comment_item_type"/>
                <input type='hidden' name='comment_item_id' value='2279' id='comment_item_id'/>
                <input type='hidden' name='comment_parent_id' id='comment_parent_id' value='0' />
            </p>
        </form>

        <article id="div-comment-preview" class="comment-body panel panel-default" style="display: none;">
            <div class="comment-content panel-body">

            </div>
        </article><!-- .comment-body -->
    </div><!-- #respond -->
</div><!-- #comments -->
            </main><!-- #main -->
        </div><!-- #primary -->

        <div id="secondary" class="widget-area col-md-4" role="complementary">

                
                <div class="academy-ads">
    <a href="https://t.zsxq.com/yz7iMni" target="_blank">
        <img src="https://static.laravelacademy.org/algorithms.jpg" width="350">
    </a>
</div>
<div class="forum-20160919142357" style="margin-top: 5px;">
    <script charset="utf-8" language="JavaScript" type="text/javascript" src="https://adman.henghost.com/data/forum-20160919142357.js"></script>
</div>
<div class="company-ads" style="margin-top:5px;">
    <a href="http://www.tp-shop.cn/index.php?http_referer=laravel" target="_blank"><img src="http://www.tp-shop.cn/Public/images/2018shijiebei.jpg" width="350"></a>
    <!--<a href="http://www.tp-shop.cn" target="_blank"><img src="http://static.laravelacademy.org/php-opensource-shop.jpg" width="350"></a>-->
</div>
<!--
<div class="company-ads" style="margin-top:5px;">
    <a href="http://www.qingdapei.net" target="_blank">
        <img src="http://ads.wangkalike.com/laravelacademy/banner.png" width="350" style="border: 1px solid #ccc;">
    </a>
</div>
-->
<!--
<div id="xumaoyun-img-container" class="company-ads" style="margin-top:5px;">
    <script charset="utf-8" language="JavaScript" type="text/javascript" src="//docker-1252905040.file.myqcloud.com/other/xumaoyun-laravel2.js"></script>
</div>
-->

                <div class="google-ads" style="text-align:center;margin-bottom:10px;margin-top:10px;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Laravel侧边栏大矩形广告 -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:336px;height:280px"
         data-ad-client="ca-pub-6544917749399342"
         data-ad-slot="6375165315"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

                <aside id="ipt_kb_affix-2" class="widget ipt_kb_affix panel panel-default">
        <div class="panel-heading">
            <h3 class="widget-title panel-title">内容导航</h3>
        </div>
        <div class="panel-body">
            <!-- Stick it or not -->
            <input type="hidden" class="dontfix" value="1" />
            <!-- Search form -->
            <form role="search" method="get" class="search-form" action="https://laravelacademy.org/search">
                <div class="form-group">
                    <div class="input-group input-group-sm">
                        <input type="search" class="search-field form-control" placeholder="全站搜索&hellip;" value="" name="keyword" />
                        <span class="input-group-btn"><button type="submit" class="btn btn-default"><span class="ipt-icon-search"></span></button></span>
                    </div>
                </div>
            </form>

            <!-- TOC for single posts -->
            <div class="text-muted ipt-kb-toc">
                <a href="2279.html#ipt-kb-toc-scrollspy" title="点击显示/隐藏内容目录" class="bstooltip pull-right btn btn-xs btn-default accordion-toggle ipt-kb-sub-toc-toggle" data-toggle="collapse"><i class="glyphicon ipt-icon-menu"></i></a>
                <h4>
                    内容目录	</h4>
                <div class="clearfix"></div>
            </div>
            <nav id="ipt-kb-toc-scrollspy" class="collapse in">
                <ul class="nav">
                                        <li>
                        <a href="2279.html#toc_0">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        1、创建路由
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_1">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        2、创建后台控制器
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_2">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        3、创建视图
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_3">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建后台布局
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_4">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建导航条局部视图
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_5">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建登录表单
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_6">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建错误局部视图
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_7">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建文章列表视图
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_8">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        4、测试登录/退出
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_9">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        创建后台用户
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_10">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        修改退出后跳转 URL
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_11">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        修改登录后跳转 URL
                        </a>
                    </li>
                                        <li>
                        <a href="2279.html#toc_12">
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                            &nbsp
                                                        登录/退出
                        </a>
                    </li>
                                    </ul>
            </nav>
        </div>
    </aside>

            <div class="pin-wrapper">
                <div class="pinned">
                        <aside id="widget-related-posts" class="widget widget_wp_related_posts panel panel-default">
    <div class="panel-heading">
        <h3 class="widget-title panel-title">相关文章</h3>
    </div>
    <div class="panel-body">
        <div class="list-group">
                            <a href="2299.html" class="wp_rp_title list-group-item kb-list-date kb-post-list">
                    <h3>
                        <span class="glyphicon ipt-icon-file"></span>
                        基于Laravel开发博客应用系列 —— 使用Bower+Gulp集成前端资源
                    </h3>
                    <span class="clearfix"></span>
                </a>
                            <a href="2320.html" class="wp_rp_title list-group-item kb-list-date kb-post-list">
                    <h3>
                        <span class="glyphicon ipt-icon-file"></span>
                        基于Laravel开发博客应用系列 —— 在后台实现文章标签增删改查功能
                    </h3>
                    <span class="clearfix"></span>
                </a>
                            <a href="2333.html" class="wp_rp_title list-group-item kb-list-date kb-post-list">
                    <h3>
                        <span class="glyphicon ipt-icon-file"></span>
                        基于Laravel开发博客应用系列 —— 实现文件上传管理功能
                    </h3>
                    <span class="clearfix"></span>
                </a>
                            <a href="2358.html" class="wp_rp_title list-group-item kb-list-date kb-post-list">
                    <h3>
                        <span class="glyphicon ipt-icon-file"></span>
                        基于Laravel开发博客应用系列 —— 后台文章增删改查功能实现（支持Markdown）
                    </h3>
                    <span class="clearfix"></span>
                </a>
                            <a href="2371.html" class="wp_rp_title list-group-item kb-list-date kb-post-list">
                    <h3>
                        <span class="glyphicon ipt-icon-file"></span>
                        基于Laravel开发博客应用系列 —— 前台功能优化：给博客换上漂亮的主题 &amp; 完善博客功能
                    </h3>
                    <span class="clearfix"></span>
                </a>
                    </div>
    </div>
</aside>                        <div class="google-ads" style="text-align:center;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Laravel侧边栏矩形滚动广告 -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:336px;height:280px"
         data-ad-client="ca-pub-6544917749399342"
         data-ad-slot="3421636513"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
                </div>
            </div>
        </div><!-- #secondary -->

    </div><!-- #content -->
    <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">
    <p class="copyright text-muted">
        &copy; 2015-2018 Powered By Laravel 5.6
        |
        <a href="http://www.miitbeian.gov.cn/" target="_blank">浙ICP备16003554号</a>
        |
        <a href="../about-us">关于学院</a>
        |
        <a href="../about-us#ads">广告合作</a>
        |
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1256294264'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/stat.php%3Fid%3D1256294264' type='text/javascript'%3E%3C/script%3E"));</script>
    </p>
</div><!-- .site-info -->
        <div class="scroll-back-to-top-wrapper">
	        <span class="scroll-back-to-top-inner">
					<i class="fa fa-2x fa-arrow-up"></i>
			</span>
        </div>
    </footer><!-- #colophon -->
</div><!-- #page -->

    <script type='text/javascript' src="https://static.laravelacademy.org/js/app.js"></script>
<script type='text/javascript' src='https://static.laravelacademy.org/js/scroll-back-to-top.js'></script>
<script type='text/javascript' src='https://static.laravelacademy.org/js/skip-link-focus-fix.js'></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery.ajaxSetup({
           headers: {
               'X-CSRF-TOKEN': jQuery('meta[name="csrf-token"]').attr('content')
           }
        });
        // 用户退出
        jQuery('.user-logout').on('click', function () {
            jQuery('#logout-form').submit();
        });
    });

    /* <![CDATA[ */
    var scrollBackToTop = {"scrollDuration":"500","fadeDuration":"0.5"};
    /* ]]> */
</script>

<!--
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
-->
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?0149df826a6be49c34721817692bbf7f";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66519426-1', 'auto');
    ga('send', 'pageview');

</script>    <script type='text/javascript' src='https://static.laravelacademy.org/js/jquery.pin.js'></script>

<script type="text/javascript">
    jQuery(document).ready(function() {
        var s = jQuery(".pinned");
        var pos = s.position();
        jQuery(window).scroll(function() {
            var windowpos = jQuery(window).scrollTop();
            if (windowpos >= pos.top) {
                s.addClass("stick");
            } else {
                s.removeClass("stick");
            }
        });

        jQuery('.post-delete-link').on('click', function () {
            if (confirm('确定要删除这篇教程吗？') == true) {
                jQuery.ajax({
                    url: jQuery(this).attr('data-href'),
                    type: 'DELETE',
                    dataType: 'json',
                    statusCode: {
                        422: function (data) {
                            var result = jQuery.parseJSON(data.responseText);
                            jQuery.each(result.errors, function (field, errors) {
                                jQuery.each(errors, function (index, message) {
                                    alert(message);
                                })
                            });
                        },
                        404: function () {
                            alert('删除对象不存在或已删除');
                        },
                        403: function () {
                            alert('你没有删除该对象权限');
                        },
                        401: function () {
                            alert('登录后才能操作');
                        },
                        419: function () {
                            alert('认证超时，请重新登录');
                        },
                        500: function () {
                            alert('服务器开小差了，请在线联系学院君');
                        },
                        200: function (data) {
                            if (!data.success) {
                                alert(data.message);
                            } else {
                                window.location.href = data.redirect_url;
                            }
                        }
                    }
                });
            } else {
                return false;
            }
        });
    });
</script>    <script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('.ipt_kb_like_article').on('click', function () {
            var itemId = jQuery(this).attr('data-postid');
            var itemType = jQuery(this).attr('data-posttype');
            var itemKey = 'academy_like_' + itemType + '_' + itemId;
            if (localStorage.getItem(itemKey) === 'true') {
                alert('已经投过票了，请勿重复操作');
                return false;
            }
            jQuery.ajax({
                url: 'https://laravelacademy.org/vote/add',
                type: 'POST',
                data: {
                    'item_id': itemId,
                    'item_type': itemType
                },
                dataType: 'json',
                statusCode: {
                    422: function () {
                        alert('无效的请求对象');
                    },
                    404: function () {
                        alert('投票对象不存在！');
                    },
                    403: function () {
                        alert('你没有权限进行投票，登录后才能操作');
                    },
                    500: function () {
                        alert('服务器开小差了，请在线联系学院君');
                    },
                    200: function (data) {
                        if (!data.success) {
                            alert(data.message);
                        } else {
                            localStorage.setItem(itemKey, 'true');
                            window.location.reload();
                        }
                    }
                }
            });
        });
    });
</script>    <script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#preview-comment').on('click', function () {
            var comment_content = jQuery('#comment_content').val();
            if (comment_content.length == 0 || comment_content.replace(/\s+/g,"").length == 0) {
                alert('评论内容不能不能为空');
                return;
            }
            jQuery.ajax({
                url: 'https://laravelacademy.org/comment/preview',
                type: 'POST',
                data: {
                    'content': comment_content
                },
                dataType: 'json',
                statusCode: {
                    422: function () {
                        alert('无效的请求对象');
                    },
                    500: function () {
                        alert('服务器开小差了，请在线联系学院君');
                    },
                    200: function (data) {
                        if (!data.success) {
                            alert(data.message);
                        } else {
                            jQuery('#div-comment-preview .comment-content').html(data.message);
                            jQuery('#div-comment-preview').show();
                        }
                    }
                }
            });
        });
        jQuery('#submit-comment').on('click', function () {
            var comment_content = jQuery('#comment_content').val();
            if (comment_content.length == 0 || comment_content.replace(/\s+/g,"").length == 0) {
                alert('评论内容不能不能为空');
                return;
            }
            var item_id = jQuery('#comment_item_id').val();
            var item_type = jQuery('#comment_item_type').val();
            var parent_id = jQuery('#comment_parent_id').val();
            if (isNaN(item_id) || item_id <= 0 || item_type.length ==0 || isNaN(parent_id)) {
                alert('无效的评论参数，试试刷新页面并重新提交评论');
                return;
            }
            jQuery('#submit-comment').attr('disabled', 'disabled');
            jQuery.ajax({
                url: 'https://laravelacademy.org/comment/add',
                type: 'POST',
                data: {
                    'item_id': item_id,
                    'item_type': item_type,
                    'parent_id': parent_id,
                    'content': comment_content
                },
                dataType: 'json',
                statusCode: {
                    422: function () {
                        alert('无效的请求对象');
                    },
                    404: function () {
                        alert('评论对象不存在！');
                    },
                    403: function () {
                        alert('你没有权限进行评论操作');
                    },
                    401: function () {
                        alert('登录后才能进行评论操作');
                    },
                    500: function () {
                        alert('服务器开小差了，请在线联系学院君');
                    },
                    200: function (data) {
                        if (!data.success) {
                            alert(data.message);
                        } else {
                            window.location.reload();
                        }
                    }
                }
            });
            jQuery('#submit-comment').removeAttr('disabled');
        });
        jQuery('.comment-reply-link').on('click', function () {
            jQuery('#comment_parent_id').val(jQuery(this).attr('data-id'));
            jQuery('#comment_content').value = '';
            jQuery('#comment_content').attr('placeholder', jQuery(this).attr('aria-label'));
        });
        jQuery('.comment-vote-link').on('click', function () {
            if (jQuery(this).attr('disabled') == 'disabled') {
                return false;
            }
            var itemId = jQuery(this).attr('data-itemid');
            var itemType = jQuery(this).attr('data-itemtype');
            var itemKey = 'academy_like_' + itemType + '_' + itemId;
            if (localStorage.getItem(itemKey) === 'true') {
                alert('已经感谢过了，请勿重复操作');
                return false;
            }
            var obj = jQuery(this);
            jQuery(this).attr('disabled', 'disabled');
            jQuery.ajax({
                url: 'https://laravelacademy.org/vote/add',
                type: 'POST',
                data: {
                    'item_id': itemId,
                    'item_type': itemType
                },
                dataType: 'json',
                statusCode: {
                    422: function () {
                        alert('无效的请求对象');
                        jQuery('.comment-vote-link').removeAttr('disabled');
                    },
                    404: function () {
                        alert('感谢对象不存在！');
                    },
                    403: function () {
                        alert('你没有权限进行感谢');
                    },
                    500: function () {
                        alert('服务器开小差了，请在线联系学院君');
                    },
                    200: function (data) {
                        if (!data.success) {
                            alert(data.message);
                        } else {
                            localStorage.setItem(itemKey, 'true');
                            obj.text('已感谢');
                            obj.parent('.vote-link').find('.comment-vote-num').text(data.vote_count);
                        }
                    }
                }
            });
        });

        $('.comment-delete-link').click(function () {
            if (confirm('确定要删除这个回复吗？') == true) {
                $.ajax({
                    url: $(this).attr('data-href'),
                    type: 'DELETE',
                    dataType: 'json',
                    statusCode: {
                        422: function (data) {
                            var result = jQuery.parseJSON(data.responseText);
                            jQuery.each(result.errors, function (field, errors) {
                                jQuery.each(errors, function (index, message) {
                                    alert(message);
                                })
                            });
                        },
                        404: function () {
                            alert('删除对象不存在或已删除');
                        },
                        403: function () {
                            alert('你没有删除该对象权限');
                        },
                        401: function () {
                            alert('登录后才能操作');
                        },
                        419: function () {
                            alert('认证超时，请重新登录');
                        },
                        500: function () {
                            alert('服务器开小差了，请在线联系学院君');
                        },
                        200: function (data) {
                            if (!data.success) {
                                alert(data.message);
                            } else {
                                window.location.reload();
                            }
                        }
                    }
                });
            } else {
                return false;
            }
        });
    });
</script>
</body>
</html>